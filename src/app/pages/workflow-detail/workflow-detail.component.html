<div class="container">
  <div class="container">
    <div class="row">
      <div class="card">
        <div class="card-body">

          <!-- title -->
          <h4 class="card-title">Workflows</h4>
          <h5 class="card-subtitle">Overview of all Workflows</h5>

          <button class="btn btn-outline-primary btn-sm" (click)="addRow()">Add</button>

          <form (ngSubmit)="onSubmit()" [formGroup]="form">
            <div class="table-responsive">
              <table class="table align-middle">
                <thead>
                  <tr>
                    <th class="text-dark font-medium fs-4">Step</th>
                    <th class="text-dark font-medium fs-4">Step Name</th>
                    <th class="text-dark font-medium fs-4">Department Name</th>
                    <th class="text-dark font-medium fs-4">Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let row of rows; let i = index">
                    <td>
                      <input type="text" class="form-control" [value]="'Step ' + (i + 1)" readonly>
                    </td>
                    <td>
                      <input type="text" formControlName="stepName{{i}}" class="form-control" data-bs-toggle="tooltip"
                        data-bs-placement="right" data-bs-title="This top tooltip is themed via CSS variables."
                        [ngClass]="{ 'is-invalid': submitted && f['stepName' + i]?.errors }"
                        placeholder="Step Name" />
                      <div *ngIf="submitted && f['stepName' + i]?.errors" class="invalid-feedback">
                        <div *ngIf="f['stepName' + i]?.errors && f['stepName' + i]?.errors['required']">Step Name is
                          required</div>
                        <div *ngIf="f['stepName' + i]?.errors && f['stepName' + i]?.errors['pattern']">Step Name must
                          contain only letters</div>
                        <div *ngIf="f['stepName' + i]?.errors && f['stepName' + i]?.errors['minlength']">Step Name must
                          be at least 3 characters</div>
                      </div>
                    </td>

       


                    <td>
                      <select formControlName="departmentName{{i}}" class="form-control form-select">
                        <option *ngFor="let department of departmentResult" [value]="department.id">{{department.fullName}}</option>
                      </select>
                    </td>
                    <td>
                      <button type="button" (click)="removeRow(i)">Remove</button>
                    </td>
                  </tr>
                </tbody>
              </table>

              <button type="submit">Submit</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
